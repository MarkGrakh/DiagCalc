<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профессиональный калькулятор размеров экрана</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --success: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --border: #dee2e6;
            --shadow: rgba(0, 0, 0, 0.08);
            --radius: 12px;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.1);
            padding: 40px;
            width: 100%;
            max-width: 900px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }
        
        h1 {
            color: var(--dark);
            margin-bottom: 10px;
            font-weight: 700;
            font-size: 28px;
            grid-column: 1 / -1;
        }
        
        .subtitle {
            color: var(--gray);
            margin-bottom: 30px;
            font-size: 16px;
            grid-column: 1 / -1;
        }
        
        .calculator-section {
            background: var(--light);
            border-radius: var(--radius);
            padding: 30px;
        }
        
        .visualization-section {
            display: flex;
            flex-direction: column;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        .input-with-slider {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
            font-size: 14px;
        }
        
        .input-wrapper {
            position: relative;
            flex: 1;
        }
        
        input[type="number"] {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s;
            background: white;
        }
        
        input[type="number"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
        
        .input-unit {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-weight: 500;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 4px;
            outline: none;
            margin: 20px 0;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: white;
            border: 3px solid var(--primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .aspect-ratio-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }
        
        .ratio-option {
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .ratio-option:hover {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }
        
        .ratio-option.active {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }
        
        .ratio-description {
            font-size: 12px;
            color: var(--gray);
            margin-top: 4px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        
        .result-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 1px solid var(--border);
            transition: transform 0.3s;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px var(--shadow);
        }
        
        .result-label {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .result-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .result-unit {
            font-size: 16px;
            color: var(--gray);
            margin-left: 4px;
        }
        
        .screen-visualization {
            flex: 1;
            background: var(--light);
            border-radius: var(--radius);
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            border: 2px solid var(--border);
        }
        
        .screen-box {
            background: #1a1a1a;
            border-radius: 8px;
            position: relative;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            overflow: hidden;
        }
        
        .screen-diagonal {
            position: absolute;
            bottom: -40px;
            color: var(--primary);
            font-weight: 600;
            text-align: center;
            width: 100%;
        }
        
        .dimension-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .dimension-line {
            position: absolute;
            background: var(--primary);
            border-radius: 2px;
        }
        
        .dimension-label {
            position: absolute;
            background: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            color: var(--dark);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .calculate-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 25px rgba(67, 97, 238, 0.3);
        }
        
        .calculate-btn:active {
            transform: translateY(0);
        }
        
        .preset-sizes {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .preset-btn {
            padding: 12px;
            background: white;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .preset-btn:hover {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }
        
        .history-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }
        
        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            background: var(--light);
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .footer {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            color: var(--gray);
            font-size: 13px;
            line-height: 1.5;
        }
        
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .feature-icon {
            width: 24px;
            height: 24px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                gap: 30px;
                padding: 25px;
            }
            
            .input-with-slider {
                flex-direction: column;
                align-items: stretch;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .preset-sizes {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-calculator"></i> Профессиональный калькулятор размеров экрана</h1>
        <p class="subtitle">Точный расчёт габаритов телевизора или монитора по диагонали и соотношению сторон</p>
        
        <div class="calculator-section">
            <div class="section-title">Параметры расчёта</div>
            
            <div class="input-group">
                <label>Диагональ экрана:</label>
                <div class="input-with-slider">
                    <div class="input-wrapper">
                        <input 
                            type="number" 
                            id="diagonal" 
                            min="1" 
                            max="150" 
                            step="0.1" 
                            value="75" 
                            placeholder="Введите диагональ"
                        >
                        <span class="input-unit">дюймов</span>
                    </div>
                    <span style="font-weight: 600;">=</span>
                    <div class="input-wrapper">
                        <input 
                            type="number" 
                            id="diagonalCm" 
                            min="2.54" 
                            max="381" 
                            step="0.1" 
                            value="190.5" 
                            placeholder="Диагональ в см"
                        >
                        <span class="input-unit">см</span>
                    </div>
                </div>
                <input type="range" id="diagonalSlider" min="15" max="150" value="75" step="0.5">
                <div style="display: flex; justify-content: space-between; font-size: 12px; color: var(--gray);">
                    <span>15" (маленький)</span>
                    <span>75" (средний)</span>
                    <span>150" (кинотеатр)</span>
                </div>
            </div>
            
            <div class="input-group">
                <label>Соотношение сторон:</label>
                <div class="aspect-ratio-selector">
                    <div class="ratio-option active" data-ratio="16:9">
                        16:9
                        <div class="ratio-description">HD/Full HD/4K</div>
                    </div>
                    <div class="ratio-option" data-ratio="16:10">
                        16:10
                        <div class="ratio-description">Мониторы</div>
                    </div>
                    <div class="ratio-option" data-ratio="21:9">
                        21:9
                        <div class="ratio-description">Ультраширокий</div>
                    </div>
                    <div class="ratio-option" data-ratio="4:3">
                        4:3
                        <div class="ratio-description">Старые ТВ</div>
                    </div>
                    <div class="ratio-option" data-ratio="1:1">
                        1:1
                        <div class="ratio-description">Квадрат</div>
                    </div>
                </div>
            </div>
            
            <div class="input-group">
                <label>Точность округления:</label>
                <div style="display: flex; gap: 20px;">
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="radio" name="rounding" value="up" checked> Округлять вверх
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="radio" name="rounding" value="nearest"> До целого
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="radio" name="rounding" value="none"> Не округлять
                    </label>
                </div>
            </div>
            
            <button class="calculate-btn" id="calculateBtn">
                <i class="fas fa-sync-alt"></i> Рассчитать размеры
            </button>
        </div>
        
        <div class="visualization-section">
            <div class="section-title">Результаты расчёта</div>
            
            <div class="results-grid">
                <div class="result-card">
                    <div class="result-label">Ширина экрана</div>
                    <div class="result-value">
                        <span id="widthValue">166</span>
                        <span class="result-unit">см</span>
                    </div>
                </div>
                
                <div class="result-card">
                    <div class="result-label">Высота экрана</div>
                    <div class="result-value">
                        <span id="heightValue">93</span>
                        <span class="result-unit">см</span>
                    </div>
                </div>
                
                <div class="result-card">
                    <div class="result-label">Площадь экрана</div>
                    <div class="result-value">
                        <span id="areaValue">15438</span>
                        <span class="result-unit">см²</span>
                    </div>
                </div>
                
                <div class="result-card">
                    <div class="result-label">Соотношение</div>
                    <div class="result-value">
                        <span id="ratioValue">1.78</span>
                        <span class="result-unit">:1</span>
                    </div>
                </div>
            </div>
            
            <div class="screen-visualization">
                <div class="screen-box" id="screenBox" style="width: 300px; height: 169px;">
                    <div class="dimension-lines" id="dimensionLines"></div>
                    <div style="font-size: 14px; opacity: 0.8;">Экран <span id="screenSize">75"</span></div>
                    <div class="screen-diagonal" id="screenDiagonal">190.5 см</div>
                </div>
            </div>
            
            <div class="section-title">Популярные размеры</div>
            <div class="preset-sizes">
                <div class="preset-btn" data-size="32">32" (компактный)</div>
                <div class="preset-btn" data-size="43">43" (универсальный)</div>
                <div class="preset-btn" data-size="55">55" (стандартный)</div>
                <div class="preset-btn" data-size="65">65" (большой)</div>
                <div class="preset-btn" data-size="75">75" (премиум)</div>
                <div class="preset-btn" data-size="85">85" (кинотеатр)</div>
            </div>
            
            <div class="history-section">
                <div class="section-title">История расчётов</div>
                <div id="historyList">
                    <!-- История будет добавляться здесь -->
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Расчёт выполняется по формуле: Диагональ (см) = Диагональ (дюймы) × 2.54<br>
            Ширина и высота рассчитываются с использованием теоремы Пифагора для заданного соотношения сторон.</p>
            
            <div class="feature-list">
                <div class="feature-item">
                    <div class="feature-icon"><i class="fas fa-ruler"></i></div>
                    <span>Поддержка 5 форматов</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon"><i class="fas fa-sliders-h"></i></div>
                    <span>Настройка округления</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon"><i class="fas fa-history"></i></div>
                    <span>История расчётов</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon"><i class="fas fa-paint-brush"></i></div>
                    <span>Визуализация</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Элементы DOM
            const diagonalInput = document.getElementById('diagonal');
            const diagonalCmInput = document.getElementById('diagonalCm');
            const diagonalSlider = document.getElementById('diagonalSlider');
            const widthValue = document.getElementById('widthValue');
            const heightValue = document.getElementById('heightValue');
            const areaValue = document.getElementById('areaValue');
            const ratioValue = document.getElementById('ratioValue');
            const screenBox = document.getElementById('screenBox');
            const dimensionLines = document.getElementById('dimensionLines');
            const screenSize = document.getElementById('screenSize');
            const screenDiagonal = document.getElementById('screenDiagonal');
            const ratioOptions = document.querySelectorAll('.ratio-option');
            const presetBtns = document.querySelectorAll('.preset-btn');
            const historyList = document.getElementById('historyList');
            const calculateBtn = document.getElementById('calculateBtn');
            
            // Константы
            const INCH_TO_CM = 2.54;
            const DEFAULT_RATIO = '16:9';
            
            // История расчётов
            let calculationHistory = [];
            
            // Инициализация
            init();
            
            function init() {
                // Загрузка истории из localStorage
                loadHistory();
                
                // Первоначальный расчёт
                calculateDimensions();
                
                // Настройка событий
                setupEventListeners();
            }
            
            function setupEventListeners() {
                // Основные элементы ввода
                diagonalInput.addEventListener('input', function() {
                    const inches = parseFloat(this.value) || 0;
                    const cm = inches * INCH_TO_CM;
                    diagonalCmInput.value = cm.toFixed(1);
                    diagonalSlider.value = inches;
                    calculateDimensions();
                });
                
                diagonalCmInput.addEventListener('input', function() {
                    const cm = parseFloat(this.value) || 0;
                    const inches = cm / INCH_TO_CM;
                    diagonalInput.value = inches.toFixed(1);
                    diagonalSlider.value = inches;
                    calculateDimensions();
                });
                
                diagonalSlider.addEventListener('input', function() {
                    const inches = parseFloat(this.value);
                    diagonalInput.value = inches.toFixed(1);
                    diagonalCmInput.value = (inches * INCH_TO_CM).toFixed(1);
                    calculateDimensions();
                });
                
                // Выбор соотношения сторон
                ratioOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        ratioOptions.forEach(o => o.classList.remove('active'));
                        this.classList.add('active');
                        calculateDimensions();
                    });
                });
                
                // Кнопка расчёта
                calculateBtn.addEventListener('click', calculateDimensions);
                
                // Пресеты размеров
                presetBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const size = this.getAttribute('data-size');
                        diagonalInput.value = size;
                        diagonalCmInput.value = (size * INCH_TO_CM).toFixed(1);
                        diagonalSlider.value = size;
                        calculateDimensions();
                    });
                });
            }
            
            function calculateDimensions() {
                // Получение входных данных
                const diagonalInches = parseFloat(diagonalInput.value) || 0;
                const diagonalCm = diagonalInches * INCH_TO_CM;
                
                // Получение выбранного соотношения сторон
                const activeRatio = document.querySelector('.ratio-option.active').getAttribute('data-ratio');
                const [ratioWidth, ratioHeight] = activeRatio.split(':').map(Number);
                
                // Получение метода округления
                const roundingMethod = document.querySelector('input[name="rounding"]:checked').value;
                
                // Проверка входных данных
                if (diagonalInches <= 0) {
                    showError('Введите корректное значение диагонали');
                    return;
                }
                
                // Расчёт
                const aspectRatioDiagonal = Math.sqrt(ratioWidth**2 + ratioHeight**2);
                const widthCm = diagonalCm / aspectRatioDiagonal * ratioWidth;
                const heightCm = diagonalCm / aspectRatioDiagonal * ratioHeight;
                const areaCm = widthCm * heightCm;
                const ratioDecimal = ratioWidth / ratioHeight;
                
                // Округление
                const roundedWidth = roundValue(widthCm, roundingMethod);
                const roundedHeight = roundValue(heightCm, roundingMethod);
                const roundedArea = roundValue(areaCm, roundingMethod);
                const roundedRatio = roundValue(ratioDecimal, roundingMethod, 2);
                
                // Обновление интерфейса
                updateUI(roundedWidth, roundedHeight, roundedArea, roundedRatio);
                updateVisualization(diagonalInches, diagonalCm, roundedWidth, roundedHeight);
                
                // Сохранение в историю
                saveToHistory(diagonalInches, activeRatio, roundedWidth, roundedHeight);
            }
            
            function roundValue(value, method, decimals = 0) {
                switch(method) {
                    case 'up':
                        return Math.ceil(value);
                    case 'nearest':
                        return Math.round(value);
                    case 'none':
                        return parseFloat(value.toFixed(decimals));
                    default:
                        return Math.ceil(value);
                }
            }
            
            function updateUI(width, height, area, ratio) {
                widthValue.textContent = width;
                heightValue.textContent = height;
                areaValue.textContent = area;
                ratioValue.textContent = ratio;
            }
            
            function updateVisualization(diagonalInches, diagonalCm, width, height) {
                // Обновление текста
                screenSize.textContent = `${diagonalInches}"`;
                screenDiagonal.textContent = `${diagonalCm.toFixed(1)} см`;
                
                // Расчёт размеров для визуализации (масштабируем для отображения)
                const maxSize = 400;
                const scale = Math.min(maxSize / Math.max(width, height), 0.8);
                const visWidth = width * scale;
                const visHeight = height * scale;
                
                // Обновление размеров экрана
                screenBox.style.width = `${visWidth}px`;
                screenBox.style.height = `${visHeight}px`;
                
                // Обновление линий размеров
                updateDimensionLines(visWidth, visHeight, width, height);
            }
            
            function updateDimensionLines(boxWidth, boxHeight, realWidth, realHeight) {
                // Очистка предыдущих линий
                dimensionLines.innerHTML = '';
                
                // Линия ширины (внизу)
                const widthLine = document.createElement('div');
                widthLine.className = 'dimension-line';
                widthLine.style.width = `${boxWidth}px`;
                widthLine.style.height = '2px';
                widthLine.style.bottom = '-15px';
                widthLine.style.left = '0';
                
                const widthLabel = document.createElement('div');
                widthLabel.className = 'dimension-label';
                widthLabel.textContent = `${realWidth} см`;
                widthLabel.style.bottom = '-30px';
                widthLabel.style.left = '50%';
                widthLabel.style.transform = 'translateX(-50%)';
                
                // Линия высоты (слева)
                const heightLine = document.createElement('div');
                heightLine.className = 'dimension-line';
                heightLine.style.width = '2px';
                heightLine.style.height = `${boxHeight}px`;
                heightLine.style.left = '-15px';
                heightLine.style.top = '0';
                
                const heightLabel = document.createElement('div');
                heightLabel.className = 'dimension-label';
                heightLabel.textContent = `${realHeight} см`;
                heightLabel.style.left = '-30px';
                heightLabel.style.top = '50%';
                heightLabel.style.transform = 'translateY(-50%) rotate(-90deg)';
                heightLabel.style.transformOrigin = 'center';
                
                // Добавление элементов
                dimensionLines.appendChild(widthLine);
                dimensionLines.appendChild(widthLabel);
                dimensionLines.appendChild(heightLine);
                dimensionLines.appendChild(heightLabel);
            }
            
            function saveToHistory(diagonal, ratio, width, height) {
                const calculation = {
                    id: Date.now(),
                    date: new Date().toLocaleString(),
                    diagonal: diagonal,
                    ratio: ratio,
                    width: width,
                    height: height,
                    area: width * height
                };
                
                // Добавление в начало массива
                calculationHistory.unshift(calculation);
                
                // Ограничение истории 10 последними расчётами
                if (calculationHistory.length > 10) {
                    calculationHistory = calculationHistory.slice(0, 10);
                }
                
                // Сохранение в localStorage
                localStorage.setItem('screenCalcHistory', JSON.stringify(calculationHistory));
                
                // Обновление отображения истории
                updateHistoryDisplay();
            }
            
            function loadHistory() {
                const saved = localStorage.getItem('screenCalcHistory');
                if (saved) {
                    calculationHistory = JSON.parse(saved);
                    updateHistoryDisplay();
                }
            }
            
            function updateHistoryDisplay() {
                historyList.innerHTML = '';
                
                if (calculationHistory.length === 0) {
                    historyList.innerHTML = '<div style="text-align: center; color: var(--gray); padding: 20px;">Здесь будет отображаться история ваших расчётов</div>';
                    return;
                }
                
                calculationHistory.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    historyItem.innerHTML = `
                        <div>
                            <strong>${item.diagonal}"</strong> (${item.ratio})
                            <div style="font-size: 12px; color: var(--gray);">${item.date}</div>
                        </div>
                        <div style="text-align: right;">
                            ${item.width} × ${item.height} см
                            <div style="font-size: 12px; color: var(--gray);">${item.area.toFixed(0)} см²</div>
                        </div>
                    `;
                    historyList.appendChild(historyItem);
                });
            }
            
            function showError(message) {
                // В реальном приложении можно добавить более красивый вывод ошибок
                console.error(message);
            }
        });
    </script>
</body>
</html>
